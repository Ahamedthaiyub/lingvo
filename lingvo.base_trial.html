<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>lingvo.base_trial module &mdash; Lingvo  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="lingvo.compat module" href="lingvo.compat.html" />
    <link rel="prev" title="lingvo.base_runner module" href="lingvo.base_runner.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Lingvo
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="lingvo.html">lingvo package</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="lingvo.html#subpackages">Subpackages</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="lingvo.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="lingvo.base_runner.html">lingvo.base_runner module</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">lingvo.base_trial module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lingvo.base_trial.Trial"><code class="docutils literal notranslate"><span class="pre">Trial</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lingvo.base_trial.NoOpTrial"><code class="docutils literal notranslate"><span class="pre">NoOpTrial</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#lingvo.base_trial.TunerManagedError"><code class="docutils literal notranslate"><span class="pre">TunerManagedError</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="lingvo.compat.html">lingvo.compat module</a></li>
<li class="toctree-l3"><a class="reference internal" href="lingvo.datasets.html">lingvo.datasets module</a></li>
<li class="toctree-l3"><a class="reference internal" href="lingvo.eager_runners.html">lingvo.eager_runners module</a></li>
<li class="toctree-l3"><a class="reference internal" href="lingvo.executor.html">lingvo.executor module</a></li>
<li class="toctree-l3"><a class="reference internal" href="lingvo.ipython_kernel.html">lingvo.ipython_kernel module</a></li>
<li class="toctree-l3"><a class="reference internal" href="lingvo.model_imports.html">lingvo.model_imports module</a></li>
<li class="toctree-l3"><a class="reference internal" href="lingvo.model_registry.html">lingvo.model_registry module</a></li>
<li class="toctree-l3"><a class="reference internal" href="lingvo.models_test_helper.html">lingvo.models_test_helper module</a></li>
<li class="toctree-l3"><a class="reference internal" href="lingvo.pdb_wrapper.html">lingvo.pdb_wrapper module</a></li>
<li class="toctree-l3"><a class="reference internal" href="lingvo.runners.html">lingvo.runners module</a></li>
<li class="toctree-l3"><a class="reference internal" href="lingvo.trainer.html">lingvo.trainer module</a></li>
<li class="toctree-l3"><a class="reference internal" href="lingvo.trainer_utils.html">lingvo.trainer_utils module</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Lingvo</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="lingvo.html">lingvo package</a> &raquo;</li>
      <li>lingvo.base_trial module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/lingvo.base_trial.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-lingvo.base_trial">
<span id="lingvo-base-trial-module"></span><h1>lingvo.base_trial module<a class="headerlink" href="#module-lingvo.base_trial" title="Permalink to this heading"></a></h1>
<p>Defines trials for parameter exploration.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lingvo.base_trial.Trial">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lingvo.base_trial.</span></span><span class="sig-name descname"><span class="pre">Trial</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/base_trial.html#Trial"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.base_trial.Trial" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.7/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Base class for a trial.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lingvo.base_trial.Trial.Params">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Params</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/base_trial.html#Trial.Params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.base_trial.Trial.Params" title="Permalink to this definition"></a></dt>
<dd><p>Default parameters for a trial.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.base_trial.Trial.report_interval_seconds">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">report_interval_seconds</span></span><a class="headerlink" href="#lingvo.base_trial.Trial.report_interval_seconds" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.base_trial.Trial.objective_metric_key">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">objective_metric_key</span></span><a class="headerlink" href="#lingvo.base_trial.Trial.objective_metric_key" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.base_trial.Trial.Name">
<span class="sig-name descname"><span class="pre">Name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/base_trial.html#Trial.Name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.base_trial.Trial.Name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.base_trial.Trial.OverrideModelParams">
<span class="sig-name descname"><span class="pre">OverrideModelParams</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/base_trial.html#Trial.OverrideModelParams"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.base_trial.Trial.OverrideModelParams" title="Permalink to this definition"></a></dt>
<dd><p>Modifies <code class="xref py py-obj docutils literal notranslate"><span class="pre">model_params</span></code> according to trial params.</p>
<p>Through this method a <a class="reference internal" href="#lingvo.base_trial.Trial" title="lingvo.base_trial.Trial"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Trial</span></code></a> may tweak model hyperparams (e.g., learning
rate, shape, depth, or width of networks).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>model_params</strong> – the original model hyperparams.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The modified <code class="xref py py-obj docutils literal notranslate"><span class="pre">model_params</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.base_trial.Trial.ShouldStop">
<span class="sig-name descname"><span class="pre">ShouldStop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/base_trial.html#Trial.ShouldStop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.base_trial.Trial.ShouldStop" title="Permalink to this definition"></a></dt>
<dd><p>Returns whether the trial should stop.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.base_trial.Trial.ReportDone">
<span class="sig-name descname"><span class="pre">ReportDone</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">infeasible</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">infeasible_reason</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/base_trial.html#Trial.ReportDone"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.base_trial.Trial.ReportDone" title="Permalink to this definition"></a></dt>
<dd><p>Report that the trial is completed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.base_trial.Trial.ShouldStopAndMaybeReport">
<span class="sig-name descname"><span class="pre">ShouldStopAndMaybeReport</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">global_step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metrics_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/base_trial.html#Trial.ShouldStopAndMaybeReport"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.base_trial.Trial.ShouldStopAndMaybeReport" title="Permalink to this definition"></a></dt>
<dd><p>Returns whether the trial should stop.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>global_step</strong> – The global step counter.</p></li>
<li><p><strong>metrics_dict</strong> – If not None, contains the metric should be
reported. If None, do nothing but returns whether the
trial should stop.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.base_trial.Trial._DoReportTrainingProgress">
<span class="sig-name descname"><span class="pre">_DoReportTrainingProgress</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">global_step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metrics_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/base_trial.html#Trial._DoReportTrainingProgress"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.base_trial.Trial._DoReportTrainingProgress" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.base_trial.Trial.ReportEvalMeasure">
<span class="sig-name descname"><span class="pre">ReportEvalMeasure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">global_step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metrics_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkpoint_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/base_trial.html#Trial.ReportEvalMeasure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.base_trial.Trial.ReportEvalMeasure" title="Permalink to this definition"></a></dt>
<dd><p>Reports eval measurement and returns whether the trial should stop.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lingvo.base_trial.NoOpTrial">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lingvo.base_trial.</span></span><span class="sig-name descname"><span class="pre">NoOpTrial</span></span><a class="reference internal" href="_modules/lingvo/base_trial.html#NoOpTrial"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.base_trial.NoOpTrial" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#lingvo.base_trial.Trial" title="lingvo.base_trial.Trial"><code class="xref py py-class docutils literal notranslate"><span class="pre">Trial</span></code></a></p>
<p>A Trial implementation that does nothing.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lingvo.base_trial.NoOpTrial.Name">
<span class="sig-name descname"><span class="pre">Name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/base_trial.html#NoOpTrial.Name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.base_trial.NoOpTrial.Name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.base_trial.NoOpTrial.OverrideModelParams">
<span class="sig-name descname"><span class="pre">OverrideModelParams</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/base_trial.html#NoOpTrial.OverrideModelParams"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.base_trial.NoOpTrial.OverrideModelParams" title="Permalink to this definition"></a></dt>
<dd><p>Modifies <code class="xref py py-obj docutils literal notranslate"><span class="pre">model_params</span></code> according to trial params.</p>
<p>Through this method a <a class="reference internal" href="#lingvo.base_trial.Trial" title="lingvo.base_trial.Trial"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Trial</span></code></a> may tweak model hyperparams (e.g., learning
rate, shape, depth, or width of networks).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>model_params</strong> – the original model hyperparams.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The modified <code class="xref py py-obj docutils literal notranslate"><span class="pre">model_params</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.base_trial.NoOpTrial.ShouldStop">
<span class="sig-name descname"><span class="pre">ShouldStop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/base_trial.html#NoOpTrial.ShouldStop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.base_trial.NoOpTrial.ShouldStop" title="Permalink to this definition"></a></dt>
<dd><p>Returns whether the trial should stop.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.base_trial.NoOpTrial.ReportDone">
<span class="sig-name descname"><span class="pre">ReportDone</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">infeasible</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">infeasible_reason</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/base_trial.html#NoOpTrial.ReportDone"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.base_trial.NoOpTrial.ReportDone" title="Permalink to this definition"></a></dt>
<dd><p>Report that the trial is completed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.base_trial.NoOpTrial.ShouldStopAndMaybeReport">
<span class="sig-name descname"><span class="pre">ShouldStopAndMaybeReport</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">global_step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metrics_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/base_trial.html#NoOpTrial.ShouldStopAndMaybeReport"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.base_trial.NoOpTrial.ShouldStopAndMaybeReport" title="Permalink to this definition"></a></dt>
<dd><p>Returns whether the trial should stop.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>global_step</strong> – The global step counter.</p></li>
<li><p><strong>metrics_dict</strong> – If not None, contains the metric should be
reported. If None, do nothing but returns whether the
trial should stop.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.base_trial.NoOpTrial.ReportEvalMeasure">
<span class="sig-name descname"><span class="pre">ReportEvalMeasure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">global_step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metrics_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkpoint_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/base_trial.html#NoOpTrial.ReportEvalMeasure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.base_trial.NoOpTrial.ReportEvalMeasure" title="Permalink to this definition"></a></dt>
<dd><p>Reports eval measurement and returns whether the trial should stop.</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="lingvo.base_trial.TunerManagedError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lingvo.base_trial.</span></span><span class="sig-name descname"><span class="pre">TunerManagedError</span></span><a class="reference internal" href="_modules/lingvo/base_trial.html#TunerManagedError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.base_trial.TunerManagedError" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#BaseException" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseException</span></code></a></p>
<p>Base class for error that should be propagated to the tuner.</p>
<p>In base_runner.py, the training loop catchs all exceptions and treats
unknown errors as failure. However, in some cases (e.g. PyGlove uses
an EarlyStoppingError to signal early stopping that might take place
at any moment), it requires the error to propagate to the tuner. This
class is a base for such errors.</p>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="lingvo.base_runner.html" class="btn btn-neutral float-left" title="lingvo.base_runner module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="lingvo.compat.html" class="btn btn-neutral float-right" title="lingvo.compat module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>