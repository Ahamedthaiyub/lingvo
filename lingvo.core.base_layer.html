<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>lingvo.core.base_layer module &mdash; Lingvo  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="lingvo.core.base_model module" href="lingvo.core.base_model.html" />
    <link rel="prev" title="lingvo.core.base_input_generator module" href="lingvo.core.base_input_generator.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Lingvo
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="lingvo.html">lingvo package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="lingvo.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="lingvo.core.html">lingvo.core package</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="lingvo.core.html#subpackages">Subpackages</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="lingvo.core.html#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="lingvo.tasks.html">lingvo.tasks package</a></li>
<li class="toctree-l3"><a class="reference internal" href="lingvo.tools.html">lingvo.tools package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="lingvo.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Lingvo</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="lingvo.html">lingvo package</a> &raquo;</li>
          <li><a href="lingvo.core.html">lingvo.core package</a> &raquo;</li>
      <li>lingvo.core.base_layer module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/lingvo.core.base_layer.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-lingvo.core.base_layer">
<span id="lingvo-core-base-layer-module"></span><h1>lingvo.core.base_layer module<a class="headerlink" href="#module-lingvo.core.base_layer" title="Permalink to this headline"></a></h1>
<p>Base class for all layers.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lingvo.core.base_layer.Accumulator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lingvo.core.base_layer.</span></span><span class="sig-name descname"><span class="pre">Accumulator</span></span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#Accumulator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.Accumulator" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.7/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Layers can register accumulators to persist step-level state.</p>
<p>Accumulators must be represented by a Tensor of a fixed shape. The default
value must be supplied by overriding DefaultValue(). It is important that
the default tensor value is created on each call in order to avoid
accumulators leaking to different graphs.</p>
<p>Accumulators can be enabled (default) or disabled by pairing
Disable()/Enable() calls. When disabled, the accumulator will only return
the default value and will silently drop calls to SetValue(). When computing
gradients that may touch accumulators, calls should be bracketed with
Disable()/Enable().</p>
<p>Care must be taken when manipulating accumulators across Defun boundaries.
Typically, values for all accumulators in a layer must be explicitly
retrieved and passed in to the Defun scope by calling
layer.GetAccumulatorValues(), marshalling into the Defun and setting them
via layer.SetAccumulatorValues(). The reverse must be done on return.</p>
<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.base_layer.Accumulator.is_disabled">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_disabled</span></span><a class="headerlink" href="#lingvo.core.base_layer.Accumulator.is_disabled" title="Permalink to this definition"></a></dt>
<dd><p>Whether the accumulator is disabled.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.Accumulator.Disable">
<span class="sig-name descname"><span class="pre">Disable</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#Accumulator.Disable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.Accumulator.Disable" title="Permalink to this definition"></a></dt>
<dd><p>Disables the accumulator (must be balanced with Enable).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.Accumulator.Enable">
<span class="sig-name descname"><span class="pre">Enable</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#Accumulator.Enable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.Accumulator.Enable" title="Permalink to this definition"></a></dt>
<dd><p>Enables the accumulator (must balance a Disable).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.Accumulator.GetValue">
<span class="sig-name descname"><span class="pre">GetValue</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#Accumulator.GetValue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.Accumulator.GetValue" title="Permalink to this definition"></a></dt>
<dd><p>Gets the current value of the accumulator Tensor.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.Accumulator.SetValue">
<span class="sig-name descname"><span class="pre">SetValue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#Accumulator.SetValue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.Accumulator.SetValue" title="Permalink to this definition"></a></dt>
<dd><p>Sets the current value of the accumulator Tensor.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.Accumulator.Reset">
<span class="sig-name descname"><span class="pre">Reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#Accumulator.Reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.Accumulator.Reset" title="Permalink to this definition"></a></dt>
<dd><p>Resets the accumulator to its default value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.Accumulator.DefaultValue">
<span class="sig-name descname"><span class="pre">DefaultValue</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#Accumulator.DefaultValue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.Accumulator.DefaultValue" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lingvo.core.base_layer._BaseLayerInitWrapper">
<span class="sig-prename descclassname"><span class="pre">lingvo.core.base_layer.</span></span><span class="sig-name descname"><span class="pre">_BaseLayerInitWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#_BaseLayerInitWrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer._BaseLayerInitWrapper" title="Permalink to this definition"></a></dt>
<dd><p>A decorator for layer’s __init__.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>func</strong> – The __init__ method of <a class="reference internal" href="#lingvo.core.base_layer.BaseLayer" title="lingvo.core.base_layer.BaseLayer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseLayer</span></code></a>’s subclasses.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A decorator wrapper for layer’s initializer. Note that this wrapper can
be called multiple times for the same layer instance, once for each
__init__() for classes on the class hierarchy.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lingvo.core.base_layer.RecursiveFindLayerParams">
<span class="sig-prename descclassname"><span class="pre">lingvo.core.base_layer.</span></span><span class="sig-name descname"><span class="pre">RecursiveFindLayerParams</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#RecursiveFindLayerParams"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.RecursiveFindLayerParams" title="Permalink to this definition"></a></dt>
<dd><p>Returns all params that define a layer.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayerMeta">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lingvo.core.base_layer.</span></span><span class="sig-name descname"><span class="pre">BaseLayerMeta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bases</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dct</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayerMeta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayerMeta" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.7/library/functions.html#type" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code></a></p>
<p>Metaclass tracking child layers and variable initialization.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lingvo.core.base_layer.ABCLayerMeta">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lingvo.core.base_layer.</span></span><span class="sig-name descname"><span class="pre">ABCLayerMeta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bases</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dct</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#ABCLayerMeta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.ABCLayerMeta" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#lingvo.core.base_layer.BaseLayerMeta" title="lingvo.core.base_layer.BaseLayerMeta"><code class="xref py py-class docutils literal notranslate"><span class="pre">lingvo.core.base_layer.BaseLayerMeta</span></code></a>, <a class="reference external" href="https://docs.python.org/3.7/library/abc.html#abc.ABCMeta" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABCMeta</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lingvo.core.base_layer.CreateVariableMeta">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lingvo.core.base_layer.</span></span><span class="sig-name descname"><span class="pre">CreateVariableMeta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">var_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lingvo.core.base_layer.CreateVariableMeta" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#tuple" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.CreateVariableMeta._asdict">
<span class="sig-name descname"><span class="pre">_asdict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lingvo.core.base_layer.CreateVariableMeta._asdict" title="Permalink to this definition"></a></dt>
<dd><p>Return a new dict which maps field names to their values.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lingvo.core.base_layer.CreateVariableMeta._field_defaults">
<span class="sig-name descname"><span class="pre">_field_defaults</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#lingvo.core.base_layer.CreateVariableMeta._field_defaults" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lingvo.core.base_layer.CreateVariableMeta._fields">
<span class="sig-name descname"><span class="pre">_fields</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">('var_params',</span> <span class="pre">'kwargs')</span></em><a class="headerlink" href="#lingvo.core.base_layer.CreateVariableMeta._fields" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.CreateVariableMeta._make">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_make</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iterable</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lingvo.core.base_layer.CreateVariableMeta._make" title="Permalink to this definition"></a></dt>
<dd><p>Make a new CreateVariableMeta object from a sequence or iterable</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.CreateVariableMeta._replace">
<span class="sig-name descname"><span class="pre">_replace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwds</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lingvo.core.base_layer.CreateVariableMeta._replace" title="Permalink to this definition"></a></dt>
<dd><p>Return a new CreateVariableMeta object replacing specified fields with new values</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lingvo.core.base_layer.CreateVariableMeta.kwargs">
<span class="sig-name descname"><span class="pre">kwargs</span></span><a class="headerlink" href="#lingvo.core.base_layer.CreateVariableMeta.kwargs" title="Permalink to this definition"></a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lingvo.core.base_layer.CreateVariableMeta.var_params">
<span class="sig-name descname"><span class="pre">var_params</span></span><a class="headerlink" href="#lingvo.core.base_layer.CreateVariableMeta.var_params" title="Permalink to this definition"></a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lingvo.core.base_layer._CreateLayerVariablesStatus">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lingvo.core.base_layer.</span></span><span class="sig-name descname"><span class="pre">_CreateLayerVariablesStatus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#_CreateLayerVariablesStatus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer._CreateLayerVariablesStatus" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.7/library/enum.html#enum.Enum" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></a></p>
<p>An enumeration.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lingvo.core.base_layer._CreateLayerVariablesStatus.NOT_CALLED">
<span class="sig-name descname"><span class="pre">NOT_CALLED</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#lingvo.core.base_layer._CreateLayerVariablesStatus.NOT_CALLED" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lingvo.core.base_layer._CreateLayerVariablesStatus.IN_PROGRESS">
<span class="sig-name descname"><span class="pre">IN_PROGRESS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#lingvo.core.base_layer._CreateLayerVariablesStatus.IN_PROGRESS" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lingvo.core.base_layer._CreateLayerVariablesStatus.PER_SPLIT_COMPLETED">
<span class="sig-name descname"><span class="pre">PER_SPLIT_COMPLETED</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">4</span></em><a class="headerlink" href="#lingvo.core.base_layer._CreateLayerVariablesStatus.PER_SPLIT_COMPLETED" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lingvo.core.base_layer.</span></span><span class="sig-name descname"><span class="pre">BaseLayer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.module.module.Module</span></code></p>
<p>Base class for all the layer object.</p>
<p>As this BaseLayer is a proper sub-class of tf.Module, it supports proper
tracking and reflection of key constituents such as variables and submodules.</p>
<p>self.submodules returns a list of submodules that are reachable through
recursive member access from self.</p>
<p>self.variables returns a list of Variables that are reachable through
recursive member access from self.</p>
<p>self(*args, **kwargs) carries out computation on the input args and kwargs.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer._INFERENCE_DRIVER_NAME">
<span class="sig-name descname"><span class="pre">_INFERENCE_DRIVER_NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer._INFERENCE_DRIVER_NAME" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.Params">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Params</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="lingvo.core.hyperparams.html#lingvo.core.hyperparams.InstantiableParams" title="lingvo.core.hyperparams.InstantiableParams"><span class="pre">lingvo.core.hyperparams.InstantiableParams</span></a><span class="p"><span class="pre">[</span></span><span class="pre">lingvo.core.base_layer.BaseLayerT</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer.Params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.Params" title="Permalink to this definition"></a></dt>
<dd><p>Returns the layer params.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.CopyBaseParams">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">CopyBaseParams</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="lingvo.core.hyperparams.html#lingvo.core.hyperparams.InstantiableParams" title="lingvo.core.hyperparams.InstantiableParams"><span class="pre">lingvo.core.hyperparams.InstantiableParams</span></a><span class="p"><span class="pre">[</span></span><span class="pre">lingvo.core.base_layer.BaseLayerS</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="lingvo.core.hyperparams.html#lingvo.core.hyperparams.InstantiableParams" title="lingvo.core.hyperparams.InstantiableParams"><span class="pre">lingvo.core.hyperparams.InstantiableParams</span></a><span class="p"><span class="pre">[</span></span><span class="pre">lingvo.core.base_layer.BaseLayerT</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="lingvo.core.hyperparams.html#lingvo.core.hyperparams.InstantiableParams" title="lingvo.core.hyperparams.InstantiableParams"><span class="pre">lingvo.core.hyperparams.InstantiableParams</span></a><span class="p"><span class="pre">[</span></span><span class="pre">lingvo.core.base_layer.BaseLayerT</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer.CopyBaseParams"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.CopyBaseParams" title="Permalink to this definition"></a></dt>
<dd><p>Copies BaseLayer params from <code class="xref py py-obj docutils literal notranslate"><span class="pre">from_params</span></code> to <code class="xref py py-obj docutils literal notranslate"><span class="pre">to_params</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.GetVariablesDict">
<span class="sig-name descname"><span class="pre">GetVariablesDict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">visited</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer.GetVariablesDict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.GetVariablesDict" title="Permalink to this definition"></a></dt>
<dd><p>Returns a dict of variables from the model and all its children.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer._GetSelfVariablesDict">
<span class="sig-name descname"><span class="pre">_GetSelfVariablesDict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer._GetSelfVariablesDict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer._GetSelfVariablesDict" title="Permalink to this definition"></a></dt>
<dd><p>Returns a dict of variables from the model, excluding its children.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.SetVariableFree">
<span class="sig-name descname"><span class="pre">SetVariableFree</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3.7/library/functions.html#bool" title="(in Python v3.7)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.7/library/constants.html#None" title="(in Python v3.7)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer.SetVariableFree"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.SetVariableFree" title="Permalink to this definition"></a></dt>
<dd><p>Marks this layer as having no variables.</p>
<p>Note that this status affects sublayers and child layers too.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> – True to set layer as variable free.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.FPropDefaultTheta">
<span class="sig-name descname"><span class="pre">FPropDefaultTheta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer.FPropDefaultTheta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.FPropDefaultTheta" title="Permalink to this definition"></a></dt>
<dd><p>Calls <a class="reference internal" href="#lingvo.core.base_layer.BaseLayer.FProp" title="lingvo.core.base_layer.BaseLayer.FProp"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FProp</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.FProp">
<span class="sig-name descname"><span class="pre">FProp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theta</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer.FProp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.FProp" title="Permalink to this definition"></a></dt>
<dd><p>Forward propagation.</p>
<p>The central interface that subclasses should implement. The caller
calls <a class="reference internal" href="#lingvo.core.base_layer.BaseLayer.FProp" title="lingvo.core.base_layer.BaseLayer.FProp"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FProp</span></code></a> with a <a class="reference internal" href="#lingvo.core.base_layer.BaseLayer.theta" title="lingvo.core.base_layer.BaseLayer.theta"><code class="xref py py-obj docutils literal notranslate"><span class="pre">theta</span></code></a> dictionary. E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">foo</span> <span class="o">=</span> <span class="n">InstanceOfASubClassOfFoo</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">foo</span><span class="o">.</span><span class="n">FProp</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">theta</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p>The implementation of <a class="reference internal" href="#lingvo.core.base_layer.BaseLayer.FProp" title="lingvo.core.base_layer.BaseLayer.FProp"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FProp()</span></code></a> computes a function given
the theta and the inputs. E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">subs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span>
<span class="n">inputs</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">a0</span> <span class="o">=</span> <span class="n">subs</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">FProp</span><span class="p">(</span><span class="n">theta</span><span class="o">.</span><span class="n">linear</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
<span class="n">a1</span> <span class="o">=</span> <span class="n">subs</span><span class="o">.</span><span class="n">softmax</span><span class="o">.</span><span class="n">FProp</span><span class="p">(</span><span class="n">theta</span><span class="o">.</span><span class="n">softmax</span><span class="p">,</span> <span class="n">a0</span><span class="p">)</span>
<span class="c1"># The same layer applied twice.</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">subs</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">FProp</span><span class="p">(</span><span class="n">theta</span><span class="o">.</span><span class="n">linear</span><span class="p">,</span> <span class="n">a1</span><span class="p">)</span>
<span class="k">return</span> <span class="n">a2</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theta</strong> – A <a class="reference internal" href="lingvo.core.nested_map.html#lingvo.core.nested_map.NestedMap" title="lingvo.core.nested_map.NestedMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NestedMap</span></code></a> object containing weights’ values of this layer and
its children layers.</p></li>
<li><p><strong>*args</strong> – List args.</p></li>
<li><p><strong>**kwargs</strong> – Keyward args.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.FPropMeta">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">FPropMeta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer.FPropMeta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.FPropMeta" title="Permalink to this definition"></a></dt>
<dd><p>Returns metadata about the <a class="reference internal" href="#lingvo.core.base_layer.BaseLayer.FProp" title="lingvo.core.base_layer.BaseLayer.FProp"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FProp</span></code></a> computation for this layer.</p>
<p><strong>Experimental feature.</strong>
Don’t use or depend on it without consulting Lingvo authors.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">SomeComplexLayer</span><span class="o">.</span><span class="n">Params</span><span class="p">()</span>
<span class="n">meta</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">cls</span><span class="o">.</span><span class="n">FPropMeta</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">tshape</span><span class="o">.</span><span class="n">Shape</span><span class="p">([</span><span class="mi">128</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="s1">&#39;channels&#39;</span><span class="p">]))</span>
</pre></div>
</div>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">meta.flops</span></code> gives an estimate count of floating point operations done by
one <a class="reference internal" href="#lingvo.core.base_layer.BaseLayer.FProp" title="lingvo.core.base_layer.BaseLayer.FProp"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FProp</span></code></a> given an input tensor of shape [128, 20, 50, channels].
<code class="xref py py-obj docutils literal notranslate"><span class="pre">meta.out_shapes</span></code> is a tuple of TShape, which tells you what shape
of tensors this layer will return.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> – The param of a layer of this layer type.</p></li>
<li><p><strong>*args</strong> – Corresponds to FProp with Tensors replaced by <code class="xref py py-obj docutils literal notranslate"><span class="pre">TensorShape</span></code>.</p></li>
<li><p><strong>**kwargs</strong> – Corresponds to FProp with Tensors replaced by <code class="xref py py-obj docutils literal notranslate"><span class="pre">TensorShape</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>A <a class="reference internal" href="lingvo.core.nested_map.html#lingvo.core.nested_map.NestedMap" title="lingvo.core.nested_map.NestedMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NestedMap</span></code></a> with</p>
<ul class="simple">
<li><p>flops - The estimated number of floating point operations incurred by
this fprop.</p></li>
<li><p>out_shapes - A tuple of <code class="xref py py-obj docutils literal notranslate"><span class="pre">TShape</span></code>. I.e., <code class="xref py py-obj docutils literal notranslate"><span class="pre">out_shapes[i]</span></code>
represents the shape of the <code class="xref py py-obj docutils literal notranslate"><span class="pre">i</span></code>-th returned tensor of the fprop.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.params">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">params</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="lingvo.core.hyperparams.html#lingvo.core.hyperparams.InstantiableParams" title="lingvo.core.hyperparams.InstantiableParams"><span class="pre">lingvo.core.hyperparams.InstantiableParams</span></a><span class="p"><span class="pre">[</span></span><span class="pre">lingvo.core.base_layer.BaseLayerT</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.params" title="Permalink to this definition"></a></dt>
<dd><p>Returns the params upon which this layer is built.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.cluster">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cluster</span></span><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.cluster" title="Permalink to this definition"></a></dt>
<dd><p>Returns the current cluster configuration.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.do_eval">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">do_eval</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3.7/library/functions.html#bool" title="(in Python v3.7)"><span class="pre">bool</span></a></em><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.do_eval" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.parent">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parent</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">lingvo.core.base_layer.BaseLayerT</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.parent" title="Permalink to this definition"></a></dt>
<dd><p>None if self is the root layer, otherwise the parent layer of self.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.path">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><span class="pre">str</span></a></em><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.path" title="Permalink to this definition"></a></dt>
<dd><p>Returns a ‘.’-separated string with all layer names from the root.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.layer_type">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">layer_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><span class="pre">str</span></a></em><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.layer_type" title="Permalink to this definition"></a></dt>
<dd><p>Returns layer type prefixed with ‘lingvo.’.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.children">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">children</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="lingvo.core.nested_map.html#lingvo.core.nested_map.NestedMap" title="lingvo.core.nested_map.NestedMap"><span class="pre">lingvo.core.nested_map.NestedMap</span></a></em><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.children" title="Permalink to this definition"></a></dt>
<dd><p>Returns children layers of this layer in a <a class="reference internal" href="lingvo.core.nested_map.html#lingvo.core.nested_map.NestedMap" title="lingvo.core.nested_map.NestedMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NestedMap</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.GetDescendant">
<span class="sig-name descname"><span class="pre">GetDescendant</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">lingvo.core.base_layer.BaseLayerT</span></span></span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer.GetDescendant"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.GetDescendant" title="Permalink to this definition"></a></dt>
<dd><p>Returns a descendant layer given the path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – a dot separated string denoting a descendant of this layer.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The descendant layer.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#KeyError" title="(in Python v3.7)"><strong>KeyError</strong></a> – if the descendant is not found.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#IndexError" title="(in Python v3.7)"><strong>IndexError</strong></a> – if an out of range index is requested of a descendant layer.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#TypeError" title="(in Python v3.7)"><strong>TypeError</strong></a> – if attempting to index a BaseLayer as though it were a list.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.vars">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">vars</span></span><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.vars" title="Permalink to this definition"></a></dt>
<dd><p>Returns variables of this layer and its children in a <a class="reference internal" href="lingvo.core.nested_map.html#lingvo.core.nested_map.NestedMap" title="lingvo.core.nested_map.NestedMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NestedMap</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer._TransformVarsInternal">
<span class="sig-name descname"><span class="pre">_TransformVarsInternal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer._TransformVarsInternal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer._TransformVarsInternal" title="Permalink to this definition"></a></dt>
<dd><p>Internal: replaces each variable v in self._private_vars with fn(v).</p>
<p>Also recursively invokes _TransformVarsInternal() on self.children.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fn</strong> – A function that takes a variable and returns a variable or a wrapper
of the variable.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer._UndoTransformVarsInternal">
<span class="sig-name descname"><span class="pre">_UndoTransformVarsInternal</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer._UndoTransformVarsInternal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer._UndoTransformVarsInternal" title="Permalink to this definition"></a></dt>
<dd><p>Internal. Undoes _TransformVarsInternal().</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.TransformVarsTempContext">
<span class="sig-name descname"><span class="pre">TransformVarsTempContext</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer.TransformVarsTempContext"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.TransformVarsTempContext" title="Permalink to this definition"></a></dt>
<dd><p>Enters a context that temporarily transforms each variable v to fn(v).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.theta">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">theta</span></span><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.theta" title="Permalink to this definition"></a></dt>
<dd><p>Returns theta of this layer and its children in a <a class="reference internal" href="lingvo.core.nested_map.html#lingvo.core.nested_map.NestedMap" title="lingvo.core.nested_map.NestedMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NestedMap</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer._InternalGetTheta">
<span class="sig-name descname"><span class="pre">_InternalGetTheta</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer._InternalGetTheta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer._InternalGetTheta" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.accumulators">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">accumulators</span></span><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.accumulators" title="Permalink to this definition"></a></dt>
<dd><p>Returns <a class="reference internal" href="lingvo.core.nested_map.html#lingvo.core.nested_map.NestedMap" title="lingvo.core.nested_map.NestedMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NestedMap</span></code></a> of <a class="reference internal" href="#lingvo.core.base_layer.Accumulator" title="lingvo.core.base_layer.Accumulator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Accumulator</span></code></a> instances for this and children.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.fns">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fns</span></span><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.fns" title="Permalink to this definition"></a></dt>
<dd><p>Returns a read-only view of layer local functions.</p>
<p>Functions can be accessed by index ([‘name’]) or attribute notation
(<code class="xref py py-obj docutils literal notranslate"><span class="pre">fns.foo</span></code>).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Read-only attribute accessible dict view of the layer’s function library.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.AddFunction">
<span class="sig-name descname"><span class="pre">AddFunction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer.AddFunction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.AddFunction" title="Permalink to this definition"></a></dt>
<dd><p>Adds a function to the layer’s <a class="reference internal" href="#lingvo.core.base_layer.BaseLayer.fns" title="lingvo.core.base_layer.BaseLayer.fns"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fns</span></code></a> collection.</p>
<p>This should be used to add op-like functions specific to the operation
of the layer and its children. Such functions should be added in <code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code>
and may either be raw python functions or TensorFlow Defuns. This
facility is just a mechanism for organizing them and having basic checks
on name collisions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The function name. It will be accessible as <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.fns.{name}</span></code>.</p></li>
<li><p><strong>f</strong> – The function body.</p></li>
<li><p><strong>replace</strong> – Whether to replace an existing function (default False).</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#AttributeError" title="(in Python v3.7)"><strong>AttributeError</strong></a> – If the function already exists and replace == False.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer._CheckName">
<span class="sig-name descname"><span class="pre">_CheckName</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.7/library/constants.html#None" title="(in Python v3.7)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer._CheckName"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer._CheckName" title="Permalink to this definition"></a></dt>
<dd><p>Asserts name’s validity.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer._VariableCollections">
<span class="sig-name descname"><span class="pre">_VariableCollections</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer._VariableCollections"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer._VariableCollections" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.RegisterAccumulator">
<span class="sig-name descname"><span class="pre">RegisterAccumulator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acc</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer.RegisterAccumulator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.RegisterAccumulator" title="Permalink to this definition"></a></dt>
<dd><p>Registers an accumulator for this layer.</p>
<p>An accumulator is used to propagate some state to a future point,
where it is acted on (typically as part of <a class="reference internal" href="#lingvo.core.base_layer.BaseLayer.PostTrainingStepUpdate" title="lingvo.core.base_layer.BaseLayer.PostTrainingStepUpdate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PostTrainingStepUpdate</span></code></a>). This
mechanism allows for arbitrarily nested parts of a model to export state
back to the global scope. Accumulators must be specially handled
when crossing into <code class="xref py py-obj docutils literal notranslate"><span class="pre">Defun</span></code> or recurrent scopes. By abstracting the
mechanism, it allows all such state to be handled uniformly and generically.</p>
<p>Example (typically from <code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyAccumulator</span><span class="p">(</span><span class="n">base_layer</span><span class="o">.</span><span class="n">Accumulator</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">DefaultValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># [count, min, max]</span>
    <span class="k">return</span> <span class="n">tf</span><span class="o">.</span><span class="n">convert_to_tensor</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>
  <span class="k">def</span> <span class="nf">Update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state1</span><span class="p">):</span>
    <span class="n">state0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">tf</span><span class="o">.</span><span class="n">stack</span><span class="p">([</span>
        <span class="n">state0</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">state1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">tf</span><span class="o">.</span><span class="n">minimum</span><span class="p">(</span><span class="n">state0</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">state1</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
        <span class="n">tf</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="n">state0</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">state1</span><span class="p">[</span><span class="mi">2</span><span class="p">])]))</span>

<span class="bp">self</span><span class="o">.</span><span class="n">RegisterAccumulator</span><span class="p">(</span><span class="s1">&#39;mytracker&#39;</span><span class="p">,</span> <span class="n">acc</span><span class="p">)</span>
</pre></div>
</div>
<p>Later, access the current value and update it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">acc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">accumulators</span><span class="o">.</span><span class="n">mytracker</span>
<span class="n">acc</span><span class="o">.</span><span class="n">Update</span><span class="p">(</span><span class="n">tf</span><span class="o">.</span><span class="n">convert_to_tensor</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">batch_min</span><span class="p">,</span> <span class="n">batch_max</span><span class="p">]))</span>
</pre></div>
</div>
<p>Then, typically in <a class="reference internal" href="#lingvo.core.base_layer.BaseLayer.PostTrainingStepUpdate" title="lingvo.core.base_layer.BaseLayer.PostTrainingStepUpdate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PostTrainingStepUpdate</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">acc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">accumulator</span><span class="o">.</span><span class="n">mytracker</span>
<span class="n">acc_value</span> <span class="o">=</span> <span class="n">acc</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span>
<span class="c1"># Do something with the value.</span>
<span class="n">acc</span><span class="o">.</span><span class="n">Reset</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The accumulator name. Shares a namespace with children, vars and
extra theta.</p></li>
<li><p><strong>acc</strong> – An <a class="reference internal" href="#lingvo.core.base_layer.Accumulator" title="lingvo.core.base_layer.Accumulator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Accumulator</span></code></a> instance.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.GetAccumulatorValues">
<span class="sig-name descname"><span class="pre">GetAccumulatorValues</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer.GetAccumulatorValues"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.GetAccumulatorValues" title="Permalink to this definition"></a></dt>
<dd><p>Recursively gets values of all accumulators.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><a class="reference internal" href="lingvo.core.nested_map.html#lingvo.core.nested_map.NestedMap" title="lingvo.core.nested_map.NestedMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NestedMap</span></code></a> of Tensors for each registered accumulator.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.SetAccumulatorValues">
<span class="sig-name descname"><span class="pre">SetAccumulatorValues</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_values_nmap</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer.SetAccumulatorValues"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.SetAccumulatorValues" title="Permalink to this definition"></a></dt>
<dd><p>Recursively sets the values of all accumulators from a map.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>new_values_nmap</strong> – <a class="reference internal" href="lingvo.core.nested_map.html#lingvo.core.nested_map.NestedMap" title="lingvo.core.nested_map.NestedMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NestedMap</span></code></a> of accumulator name:Tensor.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.GetVariableSymbolicShape">
<span class="sig-name descname"><span class="pre">GetVariableSymbolicShape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">var_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer.GetVariableSymbolicShape"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.GetVariableSymbolicShape" title="Permalink to this definition"></a></dt>
<dd><p>Returns the variable’s symbolic shape.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.CreateVariable">
<span class="sig-name descname"><span class="pre">CreateVariable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="lingvo.core.hyperparams.html#lingvo.core.hyperparams.Params" title="lingvo.core.hyperparams.Params"><span class="pre">lingvo.core.hyperparams.Params</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.7/library/constants.html#None" title="(in Python v3.7)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer.CreateVariable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.CreateVariable" title="Permalink to this definition"></a></dt>
<dd><p>Create a variable of this layer according to the parameter <code class="xref py py-obj docutils literal notranslate"><span class="pre">var_params</span></code>.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">...</span><span class="p">):</span>    <span class="c1"># A layer&#39;s constructor</span>
  <span class="bp">self</span><span class="o">.</span><span class="n">CreateVariable</span><span class="p">(</span>
      <span class="s1">&#39;weight&#39;</span><span class="p">,</span> <span class="n">py_utils</span><span class="o">.</span><span class="n">WeightParams</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">]))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Variable name which is used as the key into vars/theta.</p></li>
<li><p><strong>var_params</strong> – <a class="reference internal" href="#lingvo.core.base_layer.BaseLayer.Params" title="lingvo.core.base_layer.BaseLayer.Params"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Params</span></code></a> used to create the variable.</p></li>
<li><p><strong>**kwargs</strong> – Keyword args passed to <a class="reference internal" href="lingvo.core.py_utils.html#lingvo.core.py_utils.CreateVariable" title="lingvo.core.py_utils.CreateVariable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">py_utils.CreateVariable</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer._CreateVariableInternal">
<span class="sig-name descname"><span class="pre">_CreateVariableInternal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#lingvo.core.base_layer.CreateVariableMeta" title="lingvo.core.base_layer.CreateVariableMeta"><span class="pre">lingvo.core.base_layer.CreateVariableMeta</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.7/library/constants.html#None" title="(in Python v3.7)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer._CreateVariableInternal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer._CreateVariableInternal" title="Permalink to this definition"></a></dt>
<dd><p>Immediately creates the variable described by <code class="xref py py-obj docutils literal notranslate"><span class="pre">meta</span></code>.</p>
<p>DO NOT OVERRIDE. For internal use only. Subclasses of BaseLayer should use
self.CreateVariable() to create variables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The variable name.</p></li>
<li><p><strong>meta</strong> – A CreateVariableMeta describing the variable to be created.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer._SelfVariableScope">
<span class="sig-name descname"><span class="pre">_SelfVariableScope</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enter_name_scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer._SelfVariableScope"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer._SelfVariableScope" title="Permalink to this definition"></a></dt>
<dd><p>Internal. Used to ensure the same variable &amp; name scopes are used.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.InstantiateVariables">
<span class="sig-name descname"><span class="pre">InstantiateVariables</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.7/library/constants.html#None" title="(in Python v3.7)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer.InstantiateVariables"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.InstantiateVariables" title="Permalink to this definition"></a></dt>
<dd><p>Create variables for this layer and child layers.</p>
<p>DO NOT OVERRIDE. Override self._CreateLayerVariables instead.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer._child_variable_scope_override">
<span class="sig-name descname"><span class="pre">_child_variable_scope_override</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer._child_variable_scope_override"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer._child_variable_scope_override" title="Permalink to this definition"></a></dt>
<dd><p>Override the variable scope for individual children.</p>
<p>Should only be overridden for backwards compatibility with old checkpoints.</p>
<p>By default, all children will be created in tf.variable_scope(p.name) of
this layer. This can be overridden by providing a list of variable scopes
keyed by a child name.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dict mapping child names to a list of variable scopes to apply.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer._CreateChildrenVariables">
<span class="sig-name descname"><span class="pre">_CreateChildrenVariables</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.7/library/constants.html#None" title="(in Python v3.7)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer._CreateChildrenVariables"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer._CreateChildrenVariables" title="Permalink to this definition"></a></dt>
<dd><p>Create variables for child layers.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer._CreateLayerVariables">
<span class="sig-name descname"><span class="pre">_CreateLayerVariables</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.7/library/constants.html#None" title="(in Python v3.7)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer._CreateLayerVariables"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer._CreateLayerVariables" title="Permalink to this definition"></a></dt>
<dd><p>Actually create variables for this layer.</p>
<p>Subclasses should override this function.</p>
<p>Variables are created inside of tf.variable_scope(self.params.name).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.AddExtraTheta">
<span class="sig-name descname"><span class="pre">AddExtraTheta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theta_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta_value</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.7/library/constants.html#None" title="(in Python v3.7)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer.AddExtraTheta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.AddExtraTheta" title="Permalink to this definition"></a></dt>
<dd><p>Add extra <a class="reference internal" href="#lingvo.core.base_layer.BaseLayer.theta" title="lingvo.core.base_layer.BaseLayer.theta"><code class="xref py py-obj docutils literal notranslate"><span class="pre">theta</span></code></a> that doesn’t directly correspond to <a class="reference internal" href="#lingvo.core.base_layer.BaseLayer.vars" title="lingvo.core.base_layer.BaseLayer.vars"><code class="xref py py-obj docutils literal notranslate"><span class="pre">vars</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.AddVN">
<span class="sig-name descname"><span class="pre">AddVN</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer.AddVN"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.AddVN" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.AddGlobalVN">
<span class="sig-name descname"><span class="pre">AddGlobalVN</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theta</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer.AddGlobalVN"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.AddGlobalVN" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer._CreateChildContext">
<span class="sig-name descname"><span class="pre">_CreateChildContext</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer._CreateChildContext"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer._CreateChildContext" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.CreateChild">
<span class="sig-name descname"><span class="pre">CreateChild</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="lingvo.core.hyperparams.html#lingvo.core.hyperparams.InstantiableParams" title="lingvo.core.hyperparams.InstantiableParams"><span class="pre">lingvo.core.hyperparams.InstantiableParams</span></a><span class="p"><span class="pre">[</span></span><span class="pre">lingvo.core.base_layer.BaseLayerT</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.7/library/constants.html#None" title="(in Python v3.7)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer.CreateChild"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.CreateChild" title="Permalink to this definition"></a></dt>
<dd><p>Create a sub layer.</p>
<p>The created sub layer can be accessed by <code class="xref py py-obj docutils literal notranslate"><span class="pre">name</span></code>. E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">CreateChild</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">foo_params</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">FProp</span><span class="o">...</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">Fprop</span><span class="o">...</span>
<span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">Fprop</span><span class="o">...</span>
</pre></div>
</div>
<p>If the layer does not have a name set, i.e. foo_params.name is None, then
its name will be set to <code class="xref py py-obj docutils literal notranslate"><span class="pre">name</span></code>. The layer’s name is used as a variable_scope
for its variables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Sub layer name which is used as the key into vars/theta.</p></li>
<li><p><strong>params</strong> – <code class="xref py py-obj docutils literal notranslate"><span class="pre">Hyperparams</span></code> object to instantiate a layer.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.CreateChildren">
<span class="sig-name descname"><span class="pre">CreateChildren</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="lingvo.core.hyperparams.html#lingvo.core.hyperparams.InstantiableParams" title="lingvo.core.hyperparams.InstantiableParams"><span class="pre">lingvo.core.hyperparams.InstantiableParams</span></a><span class="p"><span class="pre">[</span></span><span class="pre">lingvo.core.base_layer.BaseLayerT</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="lingvo.core.hyperparams.html#lingvo.core.hyperparams.InstantiableParams" title="lingvo.core.hyperparams.InstantiableParams"><span class="pre">lingvo.core.hyperparams.InstantiableParams</span></a><span class="p"><span class="pre">[</span></span><span class="pre">lingvo.core.base_layer.BaseLayerT</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.7/library/constants.html#None" title="(in Python v3.7)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer.CreateChildren"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.CreateChildren" title="Permalink to this definition"></a></dt>
<dd><p>Create a list or dict of sub layers.</p>
<p>The created sub layer list can be accessed by <code class="xref py py-obj docutils literal notranslate"><span class="pre">name</span></code>. E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">CreateChildren</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">foo</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span><span class="o">.</span><span class="n">FProp</span><span class="o">...</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">][</span><span class="mi">10</span><span class="p">]</span><span class="o">.</span><span class="n">Fprop</span><span class="o">...</span>
<span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">foo</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span><span class="o">.</span><span class="n">Fprop</span><span class="o">...</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The name for the sub layers, which is used as the key into
vars/theta.</p></li>
<li><p><strong>params</strong> – a list or dict of <code class="xref py py-obj docutils literal notranslate"><span class="pre">Hyperparams</span></code> objects to create.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.AddChild">
<span class="sig-name descname"><span class="pre">AddChild</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">children</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">lingvo.core.base_layer.BaseLayerT</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.7/library/constants.html#None" title="(in Python v3.7)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer.AddChild"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.AddChild" title="Permalink to this definition"></a></dt>
<dd><p>Add existing layer or layers as sublayer.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer._AutoAddChild">
<span class="sig-name descname"><span class="pre">_AutoAddChild</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">child</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">lingvo.core.base_layer.BaseLayerT</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.7/library/constants.html#None" title="(in Python v3.7)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer._AutoAddChild"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer._AutoAddChild" title="Permalink to this definition"></a></dt>
<dd><p>Record that a layer <code class="xref py py-obj docutils literal notranslate"><span class="pre">child</span></code> is instantiated by this layer.</p>
<p>This method should only be called internally by BaseLayerMeta.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>child</strong> – A sub-layer of this layer.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer._RemoveChild">
<span class="sig-name descname"><span class="pre">_RemoveChild</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.7/library/constants.html#None" title="(in Python v3.7)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer._RemoveChild"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer._RemoveChild" title="Permalink to this definition"></a></dt>
<dd><p>Remove a sublayer instantiated earlier from this layer.</p>
<p>This method should only be called by subclasses, and is usually used to
remove unused layers instantiated by the super class.</p>
<p>Note this will not remove any variables that have been created, which may
lead to larger checkpoint sizes and maybe errors about variables already
existing. Use at your own risk.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – the name of an existing sublayer.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer._RemoveChildren">
<span class="sig-name descname"><span class="pre">_RemoveChildren</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.7/library/constants.html#None" title="(in Python v3.7)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer._RemoveChildren"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer._RemoveChildren" title="Permalink to this definition"></a></dt>
<dd><p>Remove a list of sublayers instantiated earlier from this layer.</p>
<p>This method should only be called by subclasses, and is usually used to
remove unused layer list instantiated by the super class’s CreateChildren().</p>
<p>Note this will not remove any variables that have been created, which may
lead to larger checkpoint sizes and maybe errors about variables already
existing. Use at your own risk.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – the name of an existing list of sublayers.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer._VerifyChildren">
<span class="sig-name descname"><span class="pre">_VerifyChildren</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.7/library/constants.html#None" title="(in Python v3.7)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer._VerifyChildren"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer._VerifyChildren" title="Permalink to this definition"></a></dt>
<dd><p>Verify all children created by this layer are via <code class="xref py py-obj docutils literal notranslate"><span class="pre">CreateChild(ren)</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer._VerifyVarsAndTheta">
<span class="sig-name descname"><span class="pre">_VerifyVarsAndTheta</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.7/library/constants.html#None" title="(in Python v3.7)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer._VerifyVarsAndTheta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer._VerifyVarsAndTheta" title="Permalink to this definition"></a></dt>
<dd><p>Verify that vars and theta have the same nested structure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer.PostTrainingStepUpdate">
<span class="sig-name descname"><span class="pre">PostTrainingStepUpdate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer.PostTrainingStepUpdate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer.PostTrainingStepUpdate" title="Permalink to this definition"></a></dt>
<dd><p>Returns a TF op which will be invoked at each training step.</p>
<p>Subclasses of <a class="reference internal" href="#lingvo.core.base_layer.BaseLayer" title="lingvo.core.base_layer.BaseLayer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseLayer</span></code></a> can implement this method. The method should
return a TF op to be invoked during training after gradients are applied.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.base_layer.BaseLayer._CastToFPropDtype">
<span class="sig-name descname"><span class="pre">_CastToFPropDtype</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#BaseLayer._CastToFPropDtype"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.BaseLayer._CastToFPropDtype" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lingvo.core.base_layer.IsLayerParams">
<span class="sig-prename descclassname"><span class="pre">lingvo.core.base_layer.</span></span><span class="sig-name descname"><span class="pre">IsLayerParams</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/base_layer.html#IsLayerParams"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.base_layer.IsLayerParams" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="lingvo.core.base_input_generator.html" class="btn btn-neutral float-left" title="lingvo.core.base_input_generator module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="lingvo.core.base_model.html" class="btn btn-neutral float-right" title="lingvo.core.base_model module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>