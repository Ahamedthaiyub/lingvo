<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>lingvo.core.metrics module &mdash; Lingvo  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="lingvo.core.ml_perf_bleu_metric module" href="lingvo.core.ml_perf_bleu_metric.html" />
    <link rel="prev" title="lingvo.core.matrix_functions module" href="lingvo.core.matrix_functions.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Lingvo
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="lingvo.html">lingvo package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="lingvo.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="lingvo.core.html">lingvo.core package</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="lingvo.core.html#subpackages">Subpackages</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="lingvo.core.html#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="lingvo.tasks.html">lingvo.tasks package</a></li>
<li class="toctree-l3"><a class="reference internal" href="lingvo.tools.html">lingvo.tools package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="lingvo.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Lingvo</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="lingvo.html">lingvo package</a> &raquo;</li>
          <li><a href="lingvo.core.html">lingvo.core package</a> &raquo;</li>
      <li>lingvo.core.metrics module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/lingvo.core.metrics.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-lingvo.core.metrics">
<span id="lingvo-core-metrics-module"></span><h1>lingvo.core.metrics module<a class="headerlink" href="#module-lingvo.core.metrics" title="Permalink to this heading"></a></h1>
<p>Helper classes for computing performance metrics.</p>
<dl class="py function">
<dt class="sig sig-object py" id="lingvo.core.metrics.CreateScalarSummary">
<span class="sig-prename descclassname"><span class="pre">lingvo.core.metrics.</span></span><span class="sig-name descname"><span class="pre">CreateScalarSummary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">simple_value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#CreateScalarSummary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.CreateScalarSummary" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lingvo.core.metrics.BaseMetric">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lingvo.core.metrics.</span></span><span class="sig-name descname"><span class="pre">BaseMetric</span></span><a class="reference internal" href="_modules/lingvo/core/metrics.html#BaseMetric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.BaseMetric" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.7/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Base class for aggregating statistics to compute a performance metric.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.BaseMetric.Update">
<span class="sig-name descname"><span class="pre">Update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#BaseMetric.Update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.BaseMetric.Update" title="Permalink to this definition"></a></dt>
<dd><p>Updates this metric (e.g. accumulates statistics) from the arguments.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.metrics.BaseMetric.value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#lingvo.core.metrics.BaseMetric.value" title="Permalink to this definition"></a></dt>
<dd><p>Current value of this metric.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.BaseMetric.Summary">
<span class="sig-name descname"><span class="pre">Summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#BaseMetric.Summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.BaseMetric.Summary" title="Permalink to this definition"></a></dt>
<dd><p>Converts the current state of this metric to a <code class="xref py py-obj docutils literal notranslate"><span class="pre">tf.Summary</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – A string to use as the summary value tag.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <code class="xref py py-obj docutils literal notranslate"><span class="pre">tf.Summary</span></code> proto.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lingvo.core.metrics.ConfigurableMetric">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lingvo.core.metrics.</span></span><span class="sig-name descname"><span class="pre">ConfigurableMetric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#ConfigurableMetric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.ConfigurableMetric" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#lingvo.core.metrics.BaseMetric" title="lingvo.core.metrics.BaseMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMetric</span></code></a></p>
<p>A Metric class with configurable params.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.ConfigurableMetric.Params">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Params</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#ConfigurableMetric.Params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.ConfigurableMetric.Params" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lingvo.core.metrics.AverageMetric">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lingvo.core.metrics.</span></span><span class="sig-name descname"><span class="pre">AverageMetric</span></span><a class="reference internal" href="_modules/lingvo/core/metrics.html#AverageMetric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.AverageMetric" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#lingvo.core.metrics.BaseMetric" title="lingvo.core.metrics.BaseMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMetric</span></code></a></p>
<p>Class to compute a weighted (arithmetic) average value metric.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.AverageMetric.Update">
<span class="sig-name descname"><span class="pre">Update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#AverageMetric.Update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.AverageMetric.Update" title="Permalink to this definition"></a></dt>
<dd><p>Updates this metric (e.g. accumulates statistics) from the arguments.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.AverageMetric.GetTotalValue">
<span class="sig-name descname"><span class="pre">GetTotalValue</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#AverageMetric.GetTotalValue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.AverageMetric.GetTotalValue" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.AverageMetric.SetTotalValue">
<span class="sig-name descname"><span class="pre">SetTotalValue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#AverageMetric.SetTotalValue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.AverageMetric.SetTotalValue" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.metrics.AverageMetric.total_value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">total_value</span></span><a class="headerlink" href="#lingvo.core.metrics.AverageMetric.total_value" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.AverageMetric.GetTotalWeight">
<span class="sig-name descname"><span class="pre">GetTotalWeight</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#AverageMetric.GetTotalWeight"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.AverageMetric.GetTotalWeight" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.AverageMetric.SetTotalWeight">
<span class="sig-name descname"><span class="pre">SetTotalWeight</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#AverageMetric.SetTotalWeight"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.AverageMetric.SetTotalWeight" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.metrics.AverageMetric.total_weight">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">total_weight</span></span><a class="headerlink" href="#lingvo.core.metrics.AverageMetric.total_weight" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.metrics.AverageMetric.value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#lingvo.core.metrics.AverageMetric.value" title="Permalink to this definition"></a></dt>
<dd><p>Current value of this metric.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lingvo.core.metrics.UniqueAverageMetric">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lingvo.core.metrics.</span></span><span class="sig-name descname"><span class="pre">UniqueAverageMetric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mismatch_is_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#UniqueAverageMetric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.UniqueAverageMetric" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#lingvo.core.metrics.AverageMetric" title="lingvo.core.metrics.AverageMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">AverageMetric</span></code></a></p>
<p>Computes average metric on keyed results to ensure unique counts.</p>
<p>This implementation’s Update field takes in a <code class="xref py py-obj docutils literal notranslate"><span class="pre">key</span></code> argument that allows
tracking of per-key values.  If a previously seen key is provided, this
implementation checks that the previous value is the same as the current
value for that key to help flag issues with non-determinism, and ensures
that the final value reflects an average over unique keys only.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.UniqueAverageMetric.Update">
<span class="sig-name descname"><span class="pre">Update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#UniqueAverageMetric.Update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.UniqueAverageMetric.Update" title="Permalink to this definition"></a></dt>
<dd><p>Updates this metric (e.g. accumulates statistics) from the arguments.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.UniqueAverageMetric.Summary">
<span class="sig-name descname"><span class="pre">Summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#UniqueAverageMetric.Summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.UniqueAverageMetric.Summary" title="Permalink to this definition"></a></dt>
<dd><p>Converts the current state of this metric to a <code class="xref py py-obj docutils literal notranslate"><span class="pre">tf.Summary</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – A string to use as the summary value tag.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <code class="xref py py-obj docutils literal notranslate"><span class="pre">tf.Summary</span></code> proto.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.metrics.UniqueAverageMetric.value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#lingvo.core.metrics.UniqueAverageMetric.value" title="Permalink to this definition"></a></dt>
<dd><p>Current value of this metric.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lingvo.core.metrics.F1Metric">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lingvo.core.metrics.</span></span><span class="sig-name descname"><span class="pre">F1Metric</span></span><a class="reference internal" href="_modules/lingvo/core/metrics.html#F1Metric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.F1Metric" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#lingvo.core.metrics.BaseMetric" title="lingvo.core.metrics.BaseMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMetric</span></code></a></p>
<p>Class to compute F1 metrics.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.F1Metric.UpdateTruePositive">
<span class="sig-name descname"><span class="pre">UpdateTruePositive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#F1Metric.UpdateTruePositive"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.F1Metric.UpdateTruePositive" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.F1Metric.UpdateFalsePositive">
<span class="sig-name descname"><span class="pre">UpdateFalsePositive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#F1Metric.UpdateFalsePositive"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.F1Metric.UpdateFalsePositive" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.F1Metric.UpdateFalseNegative">
<span class="sig-name descname"><span class="pre">UpdateFalseNegative</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#F1Metric.UpdateFalseNegative"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.F1Metric.UpdateFalseNegative" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.metrics.F1Metric.value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#lingvo.core.metrics.F1Metric.value" title="Permalink to this definition"></a></dt>
<dd><p>Current value of this metric.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lingvo.core.metrics.MCCMetric">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lingvo.core.metrics.</span></span><span class="sig-name descname"><span class="pre">MCCMetric</span></span><a class="reference internal" href="_modules/lingvo/core/metrics.html#MCCMetric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.MCCMetric" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#lingvo.core.metrics.F1Metric" title="lingvo.core.metrics.F1Metric"><code class="xref py py-class docutils literal notranslate"><span class="pre">F1Metric</span></code></a></p>
<p>Class to compute Matthews correlation coefficient metric.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.MCCMetric.UpdateTrueNegative">
<span class="sig-name descname"><span class="pre">UpdateTrueNegative</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#MCCMetric.UpdateTrueNegative"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.MCCMetric.UpdateTrueNegative" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.metrics.MCCMetric.value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#lingvo.core.metrics.MCCMetric.value" title="Permalink to this definition"></a></dt>
<dd><p>Current value of this metric.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lingvo.core.metrics.CorpusBleuMetric">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lingvo.core.metrics.</span></span><span class="sig-name descname"><span class="pre">CorpusBleuMetric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#CorpusBleuMetric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.CorpusBleuMetric" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#lingvo.core.metrics.BaseMetric" title="lingvo.core.metrics.BaseMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMetric</span></code></a></p>
<p>Metric class to compute the corpus-level BLEU score.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.CorpusBleuMetric.Update">
<span class="sig-name descname"><span class="pre">Update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref_str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hyp_str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#CorpusBleuMetric.Update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.CorpusBleuMetric.Update" title="Permalink to this definition"></a></dt>
<dd><p>Updates this metric (e.g. accumulates statistics) from the arguments.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.metrics.CorpusBleuMetric.unsegmenter">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">unsegmenter</span></span><a class="headerlink" href="#lingvo.core.metrics.CorpusBleuMetric.unsegmenter" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.metrics.CorpusBleuMetric.value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#lingvo.core.metrics.CorpusBleuMetric.value" title="Permalink to this definition"></a></dt>
<dd><p>Current value of this metric.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lingvo.core.metrics.TpuEvalMetrics">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lingvo.core.metrics.</span></span><span class="sig-name descname"><span class="pre">TpuEvalMetrics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_metrics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">256</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#TpuEvalMetrics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.TpuEvalMetrics" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.7/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Manages computation of metrics during TPU execution.</p>
<p>TPU execution runs a training loop on device. To get eval metrics out of this,
metric values and weights must be carried through the loop. This requires
passing initial values to the loop setup, updated the values during the loop,
and doing a final aggregation after the loop. This class wraps the metrics
dictionary so that the needed ops can be built at the right time as the
training loop is built.</p>
<p>Note that because the model is not constructed until the loop body function is
called, the initial values must be known statically. This is done currently by
hardcoding a limit on the number of metrics and casting each metric and value
count to float32, regardless of the number of actual metrics the model
produced.</p>
<p>Note that this implementation computes the metrics over all replicas, for the
last step of the loop only (could be changed to average over all loop steps
instead).</p>
<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.TpuEvalMetrics.SetMetrics">
<span class="sig-name descname"><span class="pre">SetMetrics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metric_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step_args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#TpuEvalMetrics.SetMetrics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.TpuEvalMetrics.SetMetrics" title="Permalink to this definition"></a></dt>
<dd><p>Sets the metrics to evaluate and the per-step output tensors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>metric_dict</strong> – dict of (name -&gt; (tensor of values, tensor of weights))</p></li>
<li><p><strong>step_args</strong> – the tensors being passed to the training loop body. These share
the same structure of alternating value and weight scalars as the
initial values and the output of this function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The tensors to return from the training loop body.  For entries that are
for metrics in self._metrics, returns the value computed within the loop
(the step_args value passed in); for all others, the value will never be
used at the end and so the step_args value is passed through (which has
the effect of passing the initial values through every iteration of the
loop).</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.metrics.TpuEvalMetrics.initial_values">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">initial_values</span></span><a class="headerlink" href="#lingvo.core.metrics.TpuEvalMetrics.initial_values" title="Permalink to this definition"></a></dt>
<dd><p>Returns the initial loop values.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.metrics.TpuEvalMetrics.metrics">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">metrics</span></span><a class="headerlink" href="#lingvo.core.metrics.TpuEvalMetrics.metrics" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.TpuEvalMetrics._Zip">
<span class="sig-name descname"><span class="pre">_Zip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#TpuEvalMetrics._Zip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.TpuEvalMetrics._Zip" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.TpuEvalMetrics.FinalizeMetrics">
<span class="sig-name descname"><span class="pre">FinalizeMetrics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">loop_result</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#TpuEvalMetrics.FinalizeMetrics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.TpuEvalMetrics.FinalizeMetrics" title="Permalink to this definition"></a></dt>
<dd><p>Compute final average of the metrics, given loop_result tensors.</p>
<p>To be called outside the training loop body , but still in the scope of
tpu.batch_parallel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>loop_result</strong> – Result of the training loop.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The tensors of the final avg values and total weights.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.TpuEvalMetrics.PackMetricsValues">
<span class="sig-name descname"><span class="pre">PackMetricsValues</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#TpuEvalMetrics.PackMetricsValues"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.TpuEvalMetrics.PackMetricsValues" title="Permalink to this definition"></a></dt>
<dd><p>Packs numpy values into a dict of metrics.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.TpuEvalMetrics.ToAverageMetric">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ToAverageMetric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#TpuEvalMetrics.ToAverageMetric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.TpuEvalMetrics.ToAverageMetric" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.TpuEvalMetrics.ToAverageMetrics">
<span class="sig-name descname"><span class="pre">ToAverageMetrics</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#TpuEvalMetrics.ToAverageMetrics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.TpuEvalMetrics.ToAverageMetrics" title="Permalink to this definition"></a></dt>
<dd><p>Wrap the final metric values into AverageMetric objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dict that maps metric names to AverageMetric objects.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lingvo.core.metrics.AUCMetric">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lingvo.core.metrics.</span></span><span class="sig-name descname"><span class="pre">AUCMetric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'roc'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">samples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#AUCMetric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.AUCMetric" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#lingvo.core.metrics.BaseMetric" title="lingvo.core.metrics.BaseMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMetric</span></code></a></p>
<p>Class to compute the AUC score for binary classification.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.AUCMetric.Update">
<span class="sig-name descname"><span class="pre">Update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prob</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#AUCMetric.Update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.AUCMetric.Update" title="Permalink to this definition"></a></dt>
<dd><p>Updates the metrics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>label</strong> – An array to specify the groundtruth binary labels. Values must be
either 0 or 1.</p></li>
<li><p><strong>prob</strong> – An array to specify the prediction probabilities. Values must be
within [0, 1.0].</p></li>
<li><p><strong>weight</strong> – An array to specify the sample weight for the auc computation.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.metrics.AUCMetric.value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#lingvo.core.metrics.AUCMetric.value" title="Permalink to this definition"></a></dt>
<dd><p>Current value of this metric.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.AUCMetric.Summary">
<span class="sig-name descname"><span class="pre">Summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#AUCMetric.Summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.AUCMetric.Summary" title="Permalink to this definition"></a></dt>
<dd><p>Converts the current state of this metric to a <code class="xref py py-obj docutils literal notranslate"><span class="pre">tf.Summary</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – A string to use as the summary value tag.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <code class="xref py py-obj docutils literal notranslate"><span class="pre">tf.Summary</span></code> proto.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.AUCMetric._PrecisionAtRecall">
<span class="sig-name descname"><span class="pre">_PrecisionAtRecall</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recall</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#AUCMetric._PrecisionAtRecall"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.AUCMetric._PrecisionAtRecall" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.AUCMetric._RecallAtPrecision">
<span class="sig-name descname"><span class="pre">_RecallAtPrecision</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">precision</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#AUCMetric._RecallAtPrecision"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.AUCMetric._RecallAtPrecision" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lingvo.core.metrics.PrecisionAtRecall">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lingvo.core.metrics.</span></span><span class="sig-name descname"><span class="pre">PrecisionAtRecall</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recall_threshold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">samples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#PrecisionAtRecall"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.PrecisionAtRecall" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#lingvo.core.metrics.AUCMetric" title="lingvo.core.metrics.AUCMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">AUCMetric</span></code></a></p>
<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.metrics.PrecisionAtRecall.value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#lingvo.core.metrics.PrecisionAtRecall.value" title="Permalink to this definition"></a></dt>
<dd><p>Current value of this metric.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lingvo.core.metrics.RecallAtPrecision">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lingvo.core.metrics.</span></span><span class="sig-name descname"><span class="pre">RecallAtPrecision</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">precision_threshold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">samples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#RecallAtPrecision"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.RecallAtPrecision" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#lingvo.core.metrics.AUCMetric" title="lingvo.core.metrics.AUCMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">AUCMetric</span></code></a></p>
<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.metrics.RecallAtPrecision.value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#lingvo.core.metrics.RecallAtPrecision.value" title="Permalink to this definition"></a></dt>
<dd><p>Current value of this metric.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lingvo.core.metrics.MultiClassAUCMetric">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lingvo.core.metrics.</span></span><span class="sig-name descname"><span class="pre">MultiClassAUCMetric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_classes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'roc'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">samples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#MultiClassAUCMetric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.MultiClassAUCMetric" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#lingvo.core.metrics.BaseMetric" title="lingvo.core.metrics.BaseMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMetric</span></code></a></p>
<p>Class to compute mAP or mAUC for multiclass/multilabel classification.</p>
<p>This metric is equivalent to mAP (mean average precision) or mAUC (multiclass
AUC-ROC) for non-binary classification tasks. Another perspective of this
measure defines it as the per-class average of the auc roc or auc pr curves.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.MultiClassAUCMetric.Update">
<span class="sig-name descname"><span class="pre">Update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">labels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#MultiClassAUCMetric.Update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.MultiClassAUCMetric.Update" title="Permalink to this definition"></a></dt>
<dd><p>Updates the MultiClassAUCMetric.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>labels</strong> – An list of arrays specifying the groundtruth binary labels for
each class. Values must be either 0 or 1.</p></li>
<li><p><strong>probs</strong> – A list of arrays specifying teh prediction probabilities for each
class. Values must be within [0, 1.0]</p></li>
<li><p><strong>weights</strong> – An array to specify the sample weight for each example in the auc
computation.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.metrics.MultiClassAUCMetric.value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#lingvo.core.metrics.MultiClassAUCMetric.value" title="Permalink to this definition"></a></dt>
<dd><p>Current value of this metric.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lingvo.core.metrics.CorrelationMetric">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lingvo.core.metrics.</span></span><span class="sig-name descname"><span class="pre">CorrelationMetric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pearson'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">samples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#CorrelationMetric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.CorrelationMetric" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#lingvo.core.metrics.BaseMetric" title="lingvo.core.metrics.BaseMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMetric</span></code></a></p>
<p>Class to compute correlation.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.CorrelationMetric.Update">
<span class="sig-name descname"><span class="pre">Update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#CorrelationMetric.Update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.CorrelationMetric.Update" title="Permalink to this definition"></a></dt>
<dd><p>Updates the metrics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> – An array to specify the groundtruth float target.</p></li>
<li><p><strong>pred</strong> – An array to specify the prediction.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.metrics.CorrelationMetric.value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#lingvo.core.metrics.CorrelationMetric.value" title="Permalink to this definition"></a></dt>
<dd><p>Current value of this metric.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lingvo.core.metrics.AverageKeyedCorrelationMetric">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lingvo.core.metrics.</span></span><span class="sig-name descname"><span class="pre">AverageKeyedCorrelationMetric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pearson'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bypass_nan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#AverageKeyedCorrelationMetric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.AverageKeyedCorrelationMetric" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#lingvo.core.metrics.BaseMetric" title="lingvo.core.metrics.BaseMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMetric</span></code></a></p>
<p>Class to compute correlation per key, then report average across all keys.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.AverageKeyedCorrelationMetric.Update">
<span class="sig-name descname"><span class="pre">Update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#AverageKeyedCorrelationMetric.Update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.AverageKeyedCorrelationMetric.Update" title="Permalink to this definition"></a></dt>
<dd><p>Updates the metrics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> – The key this (target, pred) pair belongs to.</p></li>
<li><p><strong>target</strong> – An array to specify the groundtruth float target.</p></li>
<li><p><strong>pred</strong> – An array to specify the prediction.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.metrics.AverageKeyedCorrelationMetric.value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#lingvo.core.metrics.AverageKeyedCorrelationMetric.value" title="Permalink to this definition"></a></dt>
<dd><p>Current value of this metric.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lingvo.core.metrics.SamplingMetric">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lingvo.core.metrics.</span></span><span class="sig-name descname"><span class="pre">SamplingMetric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#SamplingMetric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.SamplingMetric" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#lingvo.core.metrics.ConfigurableMetric" title="lingvo.core.metrics.ConfigurableMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigurableMetric</span></code></a></p>
<p>Sampling metric base class.</p>
<p>Subclasses must implement _CreateSummary(); sampling will be handled
by this base class.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.SamplingMetric.Params">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Params</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#SamplingMetric.Params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.SamplingMetric.Params" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lingvo.core.metrics.SamplingMetric.samples">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">samples</span></span><a class="headerlink" href="#lingvo.core.metrics.SamplingMetric.samples" title="Permalink to this definition"></a></dt>
<dd><p>Returns an iterable of sampled decoded outputs to compute Summaries.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.SamplingMetric.Update">
<span class="sig-name descname"><span class="pre">Update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">decoded_outputs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#SamplingMetric.Update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.SamplingMetric.Update" title="Permalink to this definition"></a></dt>
<dd><p>Samples the input decoded_outputs NestedMap.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>decoded_outputs</strong> – A <a class="reference internal" href="lingvo.core.nested_map.html#lingvo.core.nested_map.NestedMap" title="lingvo.core.nested_map.NestedMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NestedMap</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.SamplingMetric.Summary">
<span class="sig-name descname"><span class="pre">Summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#SamplingMetric.Summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.SamplingMetric.Summary" title="Permalink to this definition"></a></dt>
<dd><p>Converts the current state of this metric to a <code class="xref py py-obj docutils literal notranslate"><span class="pre">tf.Summary</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – A string to use as the summary value tag.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <code class="xref py py-obj docutils literal notranslate"><span class="pre">tf.Summary</span></code> proto.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lingvo.core.metrics.SamplingMetric._CreateSummary">
<span class="sig-name descname"><span class="pre">_CreateSummary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/core/metrics.html#SamplingMetric._CreateSummary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lingvo.core.metrics.SamplingMetric._CreateSummary" title="Permalink to this definition"></a></dt>
<dd><p>Returns a tf.Summary for this metric.</p>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="lingvo.core.matrix_functions.html" class="btn btn-neutral float-left" title="lingvo.core.matrix_functions module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="lingvo.core.ml_perf_bleu_metric.html" class="btn btn-neutral float-right" title="lingvo.core.ml_perf_bleu_metric module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>