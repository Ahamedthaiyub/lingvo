

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>lingvo.tools.bpe_word_tokenizer module &mdash; Lingvo  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="lingvo.tools.compare_params module" href="lingvo.tools.compare_params.html" />
    <link rel="prev" title="lingvo.tools.beam_utils module" href="lingvo.tools.beam_utils.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> Lingvo
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="lingvo.html">lingvo package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="lingvo.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="lingvo.core.html">lingvo.core package</a></li>
<li class="toctree-l3"><a class="reference internal" href="lingvo.tasks.html">lingvo.tasks package</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="lingvo.tools.html">lingvo.tools package</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="lingvo.tools.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="lingvo.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Lingvo</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="lingvo.html">lingvo package</a> &raquo;</li>
        
          <li><a href="lingvo.tools.html">lingvo.tools package</a> &raquo;</li>
        
      <li>lingvo.tools.bpe_word_tokenizer module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/lingvo.tools.bpe_word_tokenizer.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-lingvo.tools.bpe_word_tokenizer">
<span id="lingvo-tools-bpe-word-tokenizer-module"></span><h1>lingvo.tools.bpe_word_tokenizer module<a class="headerlink" href="#module-lingvo.tools.bpe_word_tokenizer" title="Permalink to this headline">¶</a></h1>
<p>Generates the words_to_ids file from a BPE encoded corpus and BPE vocab file.</p>
<p>Extracts all the words in the corpus with their corresponding list of ids. Each
subword in the vocab file is mapped to their line number as its id. The lines of
the output file are like:
…
TAKE 43,7,50,14
THAT 16,35
THE 26
THEIR 16,4,9,56
…
Which is compatible with the BPE tokenizer op in core/tokenizer.py.</p>
<p>Typical workflow:</p>
<blockquote>
<div><p>subword-nmt learn-bpe train_file code_file
subword-nmt apply-bpe code_file train_file train_bpe_file
subword-nmt get-vocab train_bpe_file vocab_file</p>
<p>bpe_word_tokenizer train_bpe_file vocab_file words_to_ids_file</p>
</div></blockquote>
<dl class="py function">
<dt id="lingvo.tools.bpe_word_tokenizer._GetVocabulary">
<code class="sig-prename descclassname">lingvo.tools.bpe_word_tokenizer.</code><code class="sig-name descname">_GetVocabulary</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">vocab_filepath</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/tools/bpe_word_tokenizer.html#_GetVocabulary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lingvo.tools.bpe_word_tokenizer._GetVocabulary" title="Permalink to this definition">¶</a></dt>
<dd><p>Maps the first word in each line of the given file to its line number.</p>
</dd></dl>

<dl class="py function">
<dt id="lingvo.tools.bpe_word_tokenizer._ExtractTokenization">
<code class="sig-prename descclassname">lingvo.tools.bpe_word_tokenizer.</code><code class="sig-name descname">_ExtractTokenization</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">encoded_filepath</span></em>, <em class="sig-param"><span class="n">vocab</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/tools/bpe_word_tokenizer.html#_ExtractTokenization"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lingvo.tools.bpe_word_tokenizer._ExtractTokenization" title="Permalink to this definition">¶</a></dt>
<dd><p>Maps the words in the encoded file to their list of token ids.</p>
<p>Reads all the subwords in encoded file. Concatenates them while they have &#64;&#64;
as their last two characters. The last token of a word is the subword without
&#64;&#64;. Maps the full word to the list of corresponding vocab ids of the subwords
from the vocab dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>encoded_filepath</strong> – String, filepath of the BPE encoded file.</p></li>
<li><p><strong>vocab</strong> – Dictionary of subwords (string) to token ids (int).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary of words (string) to list of token ids (list of int).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="lingvo.tools.bpe_word_tokenizer.main">
<code class="sig-prename descclassname">lingvo.tools.bpe_word_tokenizer.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">_</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lingvo/tools/bpe_word_tokenizer.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lingvo.tools.bpe_word_tokenizer.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="lingvo.tools.compare_params.html" class="btn btn-neutral float-right" title="lingvo.tools.compare_params module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="lingvo.tools.beam_utils.html" class="btn btn-neutral float-left" title="lingvo.tools.beam_utils module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2018

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>